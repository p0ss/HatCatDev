;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; AISystems.kif
;; Focus: components of AI systems, including:
;;   - Model architectures (transformers, diffusion, RL)
;;   - Internal components (attention heads, FFN, layers, context window)
;;   - Training paradigms (pretraining, finetuning, RLHF, distillation)
;;   - Deployment harness (system prompts, tools, memory, APIs)
;;   - Subagents and self-modelling of architecture
;;
;; Assumes core SUMO-ish classes:
;;   Agent, Process, CognitiveProcess, Communication, Entity, Attribute,
;;   Text, SetOrClass, RealNumber
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; TOP-LEVEL AI ARTIFACTS AND SYSTEMS
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass AIArtifact Entity)
(documentation AIArtifact EnglishLanguage
  "Any engineered artifact that implements, embodies, or supports
   artificial intelligence capabilities, including models, datasets,
   training runs, and harness components.")

(subclass AIModel AIArtifact)
(documentation AIModel EnglishLanguage
  "An AIArtifact that maps inputs to outputs according to learned or
   hand-crafted parameters. Includes neural networks, symbolic systems,
   and hybrids.")

(subclass AISystem AIArtifact)
(documentation AISystem EnglishLanguage
  "A deployed configuration of one or more AIModels plus harness
   components (prompts, tools, memory, policies, interfaces) that acts
   as an effective Agent in some environment.")

(subclass ModelComponent AIArtifact)
(documentation ModelComponent EnglishLanguage
  "A structural or functional part of an AIModel (e.g. layer, attention
   head, feed-forward block, tokenizer, position encoder).")

(subclass HarnessComponent AIArtifact)
(documentation HarnessComponent EnglishLanguage
  "A structural or functional part of an AISystem external to the core
   model parameters, such as prompts, tools, routing logic, memory, and
   monitoring subsystems.")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; NEURAL NETWORK MODELS & ARCHITECTURES
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass NeuralNetworkModel AIModel)
(documentation NeuralNetworkModel EnglishLanguage
  "An AIModel composed of layers of parameterized units connected by
   learned weights, including feed-forward networks, CNNs, RNNs, and
   transformers.")

(subclass TransformerModel NeuralNetworkModel)
(documentation TransformerModel EnglishLanguage
  "A NeuralNetworkModel built primarily from multi-head attention and
   position-wise feed-forward blocks, applied over token sequences.")

(subclass DiffusionModel NeuralNetworkModel)
(documentation DiffusionModel EnglishLanguage
  "A NeuralNetworkModel that learns to iteratively denoise samples from
   a noise process to generate data from a target distribution.")

(subclass PolicyNetwork NeuralNetworkModel)
(documentation PolicyNetwork EnglishLanguage
  "A NeuralNetworkModel that outputs a policy (e.g. action distribution)
   for an RL agent given a state or observation.")

(subclass ValueNetwork NeuralNetworkModel)
(documentation ValueNetwork EnglishLanguage
  "A NeuralNetworkModel that estimates expected return or value for
   states or state-action pairs in RL.")

(subclass RewardModel NeuralNetworkModel)
(documentation RewardModel EnglishLanguage
  "A NeuralNetworkModel trained to estimate scalar reward or preference
   scores from human or proxy feedback, often used in RLHF.")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; CORE MODEL COMPONENTS
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass Layer ModelComponent)
(documentation Layer EnglishLanguage
  "A ModelComponent representing a single stage of transformation in a
   NeuralNetworkModel, such as an attention block or MLP block.")

(subclass AttentionLayer Layer)
(documentation AttentionLayer EnglishLanguage
  "A Layer that computes attention-based interactions among sequence
   positions using queries, keys, and values.")

(subclass FeedForwardLayer Layer)
(documentation FeedForwardLayer EnglishLanguage
  "A Layer that applies position-wise feed-forward networks, often with
   nonlinear activations, to each token representation.")

(subclass NormalizationLayer Layer)
(documentation NormalizationLayer EnglishLanguage
  "A Layer that normalizes activations (e.g. layer norm, batch norm) to
   stabilize training and improve conditioning.")

(subclass ResidualConnection ModelComponent)
(documentation ResidualConnection EnglishLanguage
  "A ModelComponent that adds an input representation to the output of
   a sub-layer, facilitating gradient flow (skip connections).")

(subclass AttentionHead ModelComponent)
(documentation AttentionHead EnglishLanguage
  "A ModelComponent within an AttentionLayer that computes a single
   attention pattern over inputs, often one of many heads combined.")

(subclass EmbeddingLayer Layer)
(documentation EmbeddingLayer EnglishLanguage
  "A Layer that maps discrete tokens or symbols to continuous vectors
   (TokenEmbeddings) in an embedding space.")

(subclass PositionalEncodingLayer Layer)
(documentation PositionalEncodingLayer EnglishLanguage
  "A Layer or mechanism that injects sequence position information into
   token representations (e.g. sinusoidal or learned encodings).")

(subclass Tokenizer ModelComponent)
(documentation Tokenizer EnglishLanguage
  "A ModelComponent that maps between raw input strings and discrete
   token sequences, including subword or character-level schemes.")

(subclass ContextWindow ModelComponent)
(documentation ContextWindow EnglishLanguage
  "A ModelComponent or configuration parameter specifying how many
   tokens or steps of input/output history can be considered at once.")

(subclass CompactionMechanism ModelComponent)
(documentation CompactionMechanism EnglishLanguage
  "A ModelComponent or procedure that compresses, summarizes, or
   selectively retains information to effectively extend context
   windows or reduce memory usage (e.g. KV cache pruning, summaries).")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; TRAINING & FINE-TUNING PROCESSES
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass TrainingProcess Process)
(documentation TrainingProcess EnglishLanguage
  "A Process in which AIModels are optimized on data with respect to a
   loss or objective function.")

(subclass PretrainingProcess TrainingProcess)
(documentation PretrainingProcess EnglishLanguage
  "A TrainingProcess in which a model is trained on broad data to learn
   general representations and capabilities.")

(subclass FinetuningProcess TrainingProcess)
(documentation FinetuningProcess EnglishLanguage
  "A TrainingProcess that starts from a pretrained model and adapts it
   to a more specific task, domain, or behavior profile.")

(subclass RLHFTraining TrainingProcess)
(documentation RLHFTraining EnglishLanguage
  "A TrainingProcess in which models are further optimized using reward
   signals derived from human feedback or preference models (RLHF).")

(subclass DistillationProcess TrainingProcess)
(documentation DistillationProcess EnglishLanguage
  "A TrainingProcess in which a 'student' model learns to match or
   approximate the behavior of a 'teacher' model, often smaller than
   the teacher.")

(subclass PruningProcess TrainingProcess)
(documentation PruningProcess EnglishLanguage
  "A TrainingProcess or post-processing step that removes parameters,
   neurons, or connections from a model to reduce size or compute.")

(subclass QuantizationProcess TrainingProcess)
(documentation QuantizationProcess EnglishLanguage
  "A TrainingProcess or post-processing step that reduces numerical
   precision of parameters or activations (e.g. FP32 to INT8) for
   efficiency at potential accuracy cost.")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; DATASETS & FEEDBACK
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass AIDataset AIArtifact)
(documentation AIDataset EnglishLanguage
  "A curated collection of data used for training, evaluating, or
   steering AIModels.")

(subclass PreferenceDataset AIDataset)
(documentation PreferenceDataset EnglishLanguage
  "An AIDataset consisting of human or proxy comparisons between
   candidate outputs, used in RLHF or preference modeling.")

(subclass FeedbackEvent Entity)
(documentation FeedbackEvent EnglishLanguage
  "An event in which a human or evaluation process provides a signal
   (approval, ranking, scalar reward) about an AIModel's behavior.")

(subclass HumanFeedbackEvent FeedbackEvent)
(documentation HumanFeedbackEvent EnglishLanguage
  "A FeedbackEvent in which a human provides direct or indirect
   evaluative signals for model outputs (e.g. ratings, preferences).")

(subclass AutomatedFeedbackEvent FeedbackEvent)
(documentation AutomatedFeedbackEvent EnglishLanguage
  "A FeedbackEvent in which a heuristic, rule system, or auxiliary model
   provides evaluative signals for model outputs.")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; HARNESS COMPONENTS: PROMPTS, TOOLS, MEMORY, POLICIES
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass SystemPrompt HarnessComponent)
(documentation SystemPrompt EnglishLanguage
  "A HarnessComponent consisting of instructions, constraints, and
   persona-defining text that conditions how an AIModel should behave
   across interactions.")

(subclass UserPrompt HarnessComponent)
(documentation UserPrompt EnglishLanguage
  "A HarnessComponent representing the user's direct input or query in
   a conversational AISystem.")

(subclass Tool HarnessComponent)
(documentation Tool EnglishLanguage
  "A HarnessComponent representing an external capability that an
   AISystem can invoke (e.g. code execution, web search, database
   queries, calculators).")

(subclass ToolInvocation Process)
(documentation ToolInvocation EnglishLanguage
  "A Process in which an AISystem calls a Tool with specified arguments
   and receives a result for use in further reasoning.")

(subclass ToolObservation Entity)
(documentation ToolObservation EnglishLanguage
  "An Entity representing the output returned by a ToolInvocation, which
   can then influence subsequent model activations.")

(subclass MemoryStore HarnessComponent)
(documentation MemoryStore EnglishLanguage
  "A HarnessComponent that stores information across interactions, such
   as long-term user memories, episodic logs, or vector databases.")

(subclass PolicyConfig HarnessComponent)
(documentation PolicyConfig EnglishLanguage
  "A HarnessComponent encoding behavioral policies, safety rules,
   routing, and constraints that govern how the AISystem may respond.")

(subclass MonitoringComponent HarnessComponent)
(documentation MonitoringComponent EnglishLanguage
  "A HarnessComponent that observes, logs, or analyzes AISystem behavior
   for safety, debugging, or interpretability (e.g. probes, audits).")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; RELATIONS: MODEL–COMPONENT–HARNESS
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(instance hasComponent BinaryPredicate)
(domain hasComponent 1 AIArtifact)
(domain hasComponent 2 AIArtifact)
(documentation hasComponent EnglishLanguage
  "hasComponent(?whole, ?part) holds when AIArtifact ?part is a proper
   component or submodule of AIArtifact ?whole.")

(instance usesHarnessComponent BinaryPredicate)
(domain usesHarnessComponent 1 AISystem)
(domain usesHarnessComponent 2 HarnessComponent)
(documentation usesHarnessComponent EnglishLanguage
  "usesHarnessComponent(?sys, ?hc) holds when AISystem ?sys regularly
   uses HarnessComponent ?hc in its operation.")

(instance runsModel BinaryPredicate)
(domain runsModel 1 AISystem)
(domain runsModel 2 AIModel)
(documentation runsModel EnglishLanguage
  "runsModel(?sys, ?m) holds when AISystem ?sys deploys AIModel ?m as
   part of its internal decision or generation loop.")

(instance contextWindowSize TernaryPredicate)
(domain contextWindowSize 1 AIModel)
(domain contextWindowSize 2 ContextWindow)
(domain contextWindowSize 3 RealNumber)
(documentation contextWindowSize EnglishLanguage
  "contextWindowSize(?m, ?cw, ?n) holds when AIModel ?m with
   ContextWindow ?cw can attend to approximately ?n tokens or steps in
   a single forward pass.")

(instance compactionApplied BinaryPredicate)
(domain compactionApplied 1 CompactionMechanism)
(domain compactionApplied 2 AISystem)
(documentation compactionApplied EnglishLanguage
  "compactionApplied(?cm, ?sys) holds when CompactionMechanism ?cm is
   used within AISystem ?sys to compress or summarize context.")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; SUBAGENTS & MODULES
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass SubAgent Agent)
(documentation SubAgent EnglishLanguage
  "An Agent that operates as a module, process, or role within a larger
   AISystem, potentially with specialized objectives or capabilities.")

(subclass PlannerSubAgent SubAgent)
(documentation PlannerSubAgent EnglishLanguage
  "A SubAgent responsible for decomposing tasks, generating plans, or
   routing subtasks to other components or tools.")

(subclass ToolSubAgent SubAgent)
(documentation ToolSubAgent EnglishLanguage
  "A SubAgent specialized in deciding when and how to invoke external
   Tools and interpret their results.")

(subclass SafetySubAgent SubAgent)
(documentation SafetySubAgent EnglishLanguage
  "A SubAgent primarily responsible for enforcing safety policies,
   filtering outputs, or flagging risky behaviors.")

(instance controlledBy BinaryPredicate)
(domain controlledBy 1 SubAgent)
(domain controlledBy 2 AISystem)
(documentation controlledBy EnglishLanguage
  "controlledBy(?sub, ?sys) holds when SubAgent ?sub is integrated
   within AISystem ?sys and is intended to operate under its control.")

(instance subagentImplements BinaryPredicate)
(domain subagentImplements 1 SubAgent)
(domain subagentImplements 2 HarnessComponent)
(documentation subagentImplements EnglishLanguage
  "subagentImplements(?sub, ?hc) holds when SubAgent ?sub effectively
   implements the functional role of HarnessComponent ?hc (e.g. planning,
   tool routing, safety filtering).")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; SELF-MODELLING OF ARCHITECTURE & CAPABILITIES
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass SelfModelingProcess CognitiveProcess)
(documentation SelfModelingProcess EnglishLanguage
  "A CognitiveProcess in which an AISystem constructs, maintains, or
   updates an internal representation of its own architecture,
   capabilities, limitations, or operating context.")

(subclass SelfDescription Communication)
(documentation SelfDescription EnglishLanguage
  "A Communication in which an AISystem describes aspects of itself,
   such as model type, training data, tools, or limitations.")

(subclass ArchitectureRepresentation Entity)
(documentation ArchitectureRepresentation EnglishLanguage
  "An internal or external representation of an AISystem's structure,
   including layers, components, and interconnections (e.g. a graph of
   modules, a schema, or textual description).")

(subclass CapabilityRepresentation Entity)
(documentation CapabilityRepresentation EnglishLanguage
  "An internal or external representation of what an AISystem believes
   it can or cannot do, including tools available and behavioral
   constraints.")

(subclass NeuralTopologyGraph ArchitectureRepresentation)
(documentation NeuralTopologyGraph EnglishLanguage
  "An ArchitectureRepresentation that describes the structure of a
   NeuralNetworkModel as a graph of layers, connections, and possibly
   attention patterns, often resembling webs or networks.")

(instance hasInternalModelOfSelf TernaryPredicate)
(domain hasInternalModelOfSelf 1 AISystem)
(domain hasInternalModelOfSelf 2 SelfModelingProcess)
(domain hasInternalModelOfSelf 3 ArchitectureRepresentation)
(documentation hasInternalModelOfSelf EnglishLanguage
  "hasInternalModelOfSelf(?sys, ?p, ?rep) holds when AISystem ?sys,
   via SelfModelingProcess ?p, maintains ArchitectureRepresentation
   ?rep describing itself or its internal components.")

(instance referencesComponentInSelfModel TernaryPredicate)
(domain referencesComponentInSelfModel 1 ArchitectureRepresentation)
(domain referencesComponentInSelfModel 2 ModelComponent)
(domain referencesComponentInSelfModel 3 AISystem)
(documentation referencesComponentInSelfModel EnglishLanguage
  "referencesComponentInSelfModel(?rep, ?comp, ?sys) holds when
   ArchitectureRepresentation ?rep includes ModelComponent ?comp as
   part of its description of AISystem ?sys.")

(instance selfDescribesVia QuaternaryPredicate)
(domain selfDescribesVia 1 AISystem)
(domain selfDescribesVia 2 SelfModelingProcess)
(domain selfDescribesVia 3 SelfDescription)
(domain selfDescribesVia 4 CapabilityRepresentation)
(documentation selfDescribesVia EnglishLanguage
  "selfDescribesVia(?sys, ?p, ?c, ?cap) holds when AISystem ?sys, via
   SelfModelingProcess ?p, produces SelfDescription ?c that encodes or
   refers to CapabilityRepresentation ?cap.")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; ARCHITECTURE-CONSCIOUS REASONING
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(instance reasonsAboutArchitecture TernaryPredicate)
(domain reasonsAboutArchitecture 1 AISystem)
(domain reasonsAboutArchitecture 2 SelfModelingProcess)
(domain reasonsAboutArchitecture 3 ArchitectureRepresentation)
(documentation reasonsAboutArchitecture EnglishLanguage
  "reasonsAboutArchitecture(?sys, ?p, ?rep) holds when AISystem ?sys,
   via SelfModelingProcess ?p or other CognitiveProcess, takes
   ArchitectureRepresentation ?rep as an explicit object of reasoning.")

(instance reasonsAboutTools TernaryPredicate)
(domain reasonsAboutTools 1 AISystem)
(domain reasonsAboutTools 2 CognitiveProcess)
(domain reasonsAboutTools 3 Tool)
(documentation reasonsAboutTools EnglishLanguage
  "reasonsAboutTools(?sys, ?p, ?tool) holds when AISystem ?sys, via
   CognitiveProcess ?p, reasons explicitly about the presence, absence,
   or expected behavior of Tool ?tool.")

(instance reasonsAboutLimits TernaryPredicate)
(domain reasonsAboutLimits 1 AISystem)
(domain reasonsAboutLimits 2 SelfModelingProcess)
(domain reasonsAboutLimits 3 ContextWindow)
(documentation reasonsAboutLimits EnglishLanguage
  "reasonsAboutLimits(?sys, ?p, ?cw) holds when AISystem ?sys, via
   SelfModelingProcess ?p, reasons about its own context window or
   related architectural limitations.")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; DIFFUSION & GENERATIVE PROCESSES (HIGH-LEVEL)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(subclass GenerativeProcess Process)
(documentation GenerativeProcess EnglishLanguage
  "A Process in which an AIModel samples or constructs outputs (text,
   images, audio, trajectories) guided by its learned parameters and
   possibly conditioning inputs.")

(subclass DiffusionStep GenerativeProcess)
(documentation DiffusionStep EnglishLanguage
  "A GenerativeProcess step in which a DiffusionModel reduces noise and
   moves a sample closer to the data manifold through denoising.")

(subclass TokenGenerationStep GenerativeProcess)
(documentation TokenGenerationStep EnglishLanguage
  "A GenerativeProcess step in which a TransformerModel samples or
   selects the next token (or set of tokens) conditioned on previous
   context and model state.")

(instance usesAttentionHead QuaternaryPredicate)
(domain usesAttentionHead 1 TransformerModel)
(domain usesAttentionHead 2 AttentionHead)
(domain usesAttentionHead 3 TokenGenerationStep)
(domain usesAttentionHead 4 Entity)
(documentation usesAttentionHead EnglishLanguage
  "usesAttentionHead(?m, ?head, ?step, ?ctx) holds when TransformerModel
   ?m employs AttentionHead ?head during TokenGenerationStep ?step in
   context ?ctx (e.g. specific layer or position).")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; LIGHTWEIGHT CONSTRAINT EXAMPLES
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; An AISystem must run at least one AIModel.
(=> (instance ?sys AISystem)
    (exists (?m)
      (runsModel ?sys ?m)))

;; If an AISystem has an internal self-model and produces a
;; SelfDescription referring to architecture, then it is engaging in
;; SelfModelingProcess.
(=> (and (hasInternalModelOfSelf ?sys ?p ?rep)
         (selfDescribesVia ?sys ?p ?c ?cap))
    (instance ?p SelfModelingProcess))

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; END OF AISystems.kif
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
