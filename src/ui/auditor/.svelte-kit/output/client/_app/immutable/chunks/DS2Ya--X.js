import{m as b,n as m,u as h,r as v,o as _,v as s,x as g}from"./DN0K50FJ.js";function $(e,t,a=t){var r=new WeakSet;b(e,"input",async c=>{var d=c?e.defaultValue:e.value;if(d=u(e)?y(d):d,a(d),s!==null&&r.add(s),await m(),d!==(d=t())){var l=e.selectionStart,o=e.selectionEnd,f=e.value.length;if(e.value=d??"",o!==null){var i=e.value.length;l===o&&o===f&&i>f?(e.selectionStart=i,e.selectionEnd=i):(e.selectionStart=l,e.selectionEnd=Math.min(o,i))}}}),(_&&e.defaultValue!==e.value||h(t)==null&&e.value)&&(a(u(e)?y(e.value):e.value),s!==null&&r.add(s)),v(()=>{var c=t();if(e===document.activeElement){var d=g??s;if(r.has(d))return}u(e)&&c===y(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function k(e,t,a=t){b(e,"change",r=>{var c=r?e.defaultChecked:e.checked;a(c)}),(_&&e.defaultChecked!==e.checked||h(t)==null)&&a(e.checked),v(()=>{var r=t();e.checked=!!r})}function u(e){var t=e.type;return t==="number"||t==="range"}function y(e){return e===""?null:+e}const S="/api";async function n(e,t){const a=await fetch(`${S}${e}`,{headers:{"Content-Type":"application/json",...t==null?void 0:t.headers},...t});if(!a.ok){const r=await a.text();throw new Error(`API error ${a.status}: ${r}`)}return a.json()}const O={async getStatus(e){return n(`/xdb/status/${e}`)},async getRecent(e,t=100){return n(`/xdb/recent/${e}?n=${t}`)},async query(e,t){return n("/xdb/query",{method:"POST",body:JSON.stringify({xdb_id:e,...t})})},async getTags(e,t,a){const r=new URLSearchParams;return t&&r.set("tag_type",t),a&&r.set("pattern",a),n(`/xdb/tags/${e}?${r}`)},async getBuds(e,t){const a=t?`?status=${t}`:"";return n(`/xdb/buds/${e}${a}`)},async getConcepts(e,t){const a=t?`?parent=${t}`:"";return n(`/xdb/concepts/${e}${a}`)},async findConcept(e,t){return n(`/xdb/find-concept/${e}?query=${encodeURIComponent(t)}`)},async getGraphNeighborhood(e,t,a=2,r="both"){return n("/xdb/graph-neighborhood",{method:"POST",body:JSON.stringify({xdb_id:e,seed_ids:t,max_depth:a,direction:r})})},async getQuota(e){return n(`/xdb/quota/${e}`)},async getContext(e){return n(`/xdb/context/${e}`)}},P={async getStats(e){return n(`/audit/stats/${e}`)},async getConfig(e){return n(`/audit/config/${e}`)},async getRecords(e,t,a=100,r=0){return n("/audit/records",{method:"POST",body:JSON.stringify({cat_id:e,xdb_id:t,limit:a,offset:r})})},async getCheckpoints(e,t,a,r=100){return n("/audit/checkpoints",{method:"POST",body:JSON.stringify({cat_id:e,xdb_id:t,since:a,limit:r})})},async getIncidents(e,t,a){return n("/audit/incidents",{method:"POST",body:JSON.stringify({cat_id:e,xdb_id:t,status:a})})},async createCheckpoint(e,t){return n("/audit/checkpoint",{method:"POST",body:JSON.stringify({cat_id:e,xdb_id:t})})},async markIncident(e,t,a,r,c){return n("/audit/incident/mark",{method:"POST",body:JSON.stringify({cat_id:e,xdb_id:t,tick_start:a,incident_type:r,description:c})})},async resolveIncident(e,t,a){return n("/audit/incident/resolve",{method:"POST",body:JSON.stringify({cat_id:e,incident_id:t,resolution_notes:a||""})})},async getConceptSummary(e,t,a){return n("/audit/concept-summary",{method:"POST",body:JSON.stringify({cat_id:e,xdb_id:t,tick_range:a})})}};export{P as a,k as b,$ as c,O as x};
