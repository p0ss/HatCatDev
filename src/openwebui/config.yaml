# HatCat OpenWebUI Server Configuration
# MAP-compliant lens pack configuration

# Lens pack selection (legacy format - will show deprecation warning)
# Use lens_pack_id for backward compatibility with existing packs
# NOTE: Using v2/v3 with activation lenses only (no text lenses = no divergence scores)
# Text lenses were discontinued due to insufficient training data - will use embedding model for similarity in future
lens_pack_id: "gemma-3-4b-pt_sumo-wordnet-v3"

# Model configuration
model:
  name: "google/gemma-3-4b-pt"
  dtype: "bfloat16"  # bfloat16, float16, or float32
  device_map: "auto"
  low_cpu_mem_usage: true

# Lens manager configuration
lens_manager:
  base_layers: [0]  # Start with base layer, dynamic loading handles deeper layers
  use_activation_lenses: true
  use_text_lenses: true
  keep_top_k: 100
  load_threshold: 0.3
  max_loaded_lenses: 1000

# Server configuration
server:
  host: "0.0.0.0"
  port: 8765
  title: "HatCat Divergence API"

# Generation defaults
generation:
  temperature: 0.7
  max_tokens: 512
  stream: true
